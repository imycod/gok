<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet/less" href="./demo1.less">
    <script src='https://cdnjs.cloudflare.com/ajax/libs/less.js/4.1.3/less.min.js'
        integrity='sha512-6gUGqd/zBCrEKbJqPI7iINc61jlOfH5A+SluY15IkNO1o4qP1DEYjQBewTB4l0U4ihXZdupg8Mb77VxqE+37dg=='
        crossorigin='anonymous'></script>
    <style>
        .bd {
            border: 1px solid red;
        }

        #root {
            width: 100%;
            height: 100vh;
        }

        .bubbles {
            background-color: black;
        }
    </style>
</head>

<body>
    <div id="root">
        <div id="bubbles" style="width: 1440px; height:300px" class="bubbles bd"></div>
    </div>
    <script src='https://cdn.bootcss.com/vue/2.5.16/vue.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/echarts/5.3.3/echarts.min.js'
        integrity='sha512-2L0h0GhoIHQEjti/1KwfjcbyaTHy+hPPhE1o5wTCmviYcPO/TD9oZvUxFQtWvBkCSTIpt+fjsx1CCx6ekb51gw=='
        crossorigin='anonymous'></script>
    <script>
        new Vue({
            el: '#root',
            data() {
                return {
                    bubbles: [
                        { // 最大居中，或放第一个
                            value: 150000,
                            label: '视频时长',
                            unit: '分钟',
                            // y：1 从上往下
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                { offset: 0, color: 'rgb(2,255,241)', },
                                { offset: 0.5, color: 'rgba(51, 209, 201, 0.7)', },
                                { offset: 0.7, color: 'rgba(51, 209, 201, 0.5)', },
                                { offset: 1, color: 'rgba(51, 209, 201, 0)', },
                            ]),
                            size: 150,//气泡大小  x轴（左边大右边小）y轴（上边大下边小）
                            offsetData: [50, 53], //偏移量
                            labelStyle: {
                                fontWeight: 500,
                                color: '#fff',
                                padding: [5, 0, 5, 0],
                                align: 'center',
                                fontSize: 18,
                            },
                            valueFontStyle: {
                                color: '#fff',
                                fontSize: 20,
                                fontWeight: 500,
                            },
                            unitFontStyle: {
                                fontWeight: 500,
                                color: '#fff',
                                fontSize: 14,
                            },
                        },
                        {
                            value: 2080,
                            label: '题库',
                            unit: '',
                            size: 102,//气泡大小
                            offsetData: [10, 35], //偏移量
                            labelStyle: {
                                fontWeight: 500,
                                color: '#fff',
                                padding: [5, 0, 5, 0],
                                align: 'center',
                                fontSize: 18,
                            },
                            valueFontStyle: {
                                fontWeight: 500,
                                color: '#fff',
                                fontSize: 18,
                            },
                        },
                        {
                            value: 1112,
                            label: '课件',
                            unit: '',
                            size: 80,//气泡大小
                            offsetData: [0, 73], //偏移量
                            labelStyle: {
                                fontWeight: 500,
                                color: '#fff',
                                padding: [5, 0, 5, 0],
                                align: 'center',
                                fontSize: 16,
                            },
                            valueFontStyle: {
                                fontWeight: 500,
                                color: '#fff',
                                fontSize: 16,
                            },
                        },
                        {
                            value: 1357,
                            label: '课程',
                            unit: '',
                            size: 66,//气泡大小
                            offsetData: [25, 83], //偏移量
                            labelStyle: {
                                fontWeight: 500,
                                color: '#fff',
                                padding: [5, 0, 5, 0],
                                align: 'center',
                                fontSize: 14,
                            },
                            valueFontStyle: {
                                fontWeight: 500,
                                color: '#fff',
                                fontSize: 14,
                            },
                        },
                        {
                            value: 618,
                            label: '其它',
                            unit: '',
                            size: 56,//气泡大小
                            offsetData: [90, 30], //偏移量
                            labelStyle: {
                                fontWeight: 500,
                                color: '#fff',
                                padding: [5, 0, 5, 0],
                                align: 'center',
                                fontSize: 12,
                            },
                            valueFontStyle: {
                                fontWeight: 500,
                                color: '#fff',
                                fontSize: 12,
                            },
                        },
                    ],
                }
            },
            created() {
                this.setFontSize()
                window.onresize = () => {
                    this.setFontSize()
                };
            },
            beforeDestroy() {
                document.querySelector('html').style.fontSize = 'inherit'
            },
            mounted() {
                this.draw()
            },
            computed: {

            },
            methods: {
                setFontSize() {
                    let designWidth = 1920;//设计稿的宽度
                    let designHeight = 1080;//设计稿的高度
                    // 如果可视实际比例小于设计稿比例
                    const fontSize =
                        // document.documentElement.clientWidth/document.documentElement.clientHeight < designWidth/designHeight ? 
                        (document.documentElement.clientWidth / designWidth) * 12
                    // (document.documentElement.clientHeight / designHeight) * 12;
                    document.querySelector('html').style.fontSize = fontSize + 'px';
                    console.log('我是设置的字体基准', fontSize);
                },
                draw() {
                    const option = this.getOptions()
                    const ngrChart = echarts.init(
                        document.getElementById('bubbles')
                    )
                    ngrChart.setOption(option)
                },
                getOptions() {
                    const datas = this.getDatas()

                    const option = {
                        grid: {
                            show: false,
                            top: 10,
                            bottom: 10,
                        },
                        xAxis: {
                            type: 'value',
                            show: false,
                            min: 0,
                            max: 100,
                            nameLocation: 'middle',
                            nameGap: 5,
                        },
                        yAxis: {
                            min: 0,
                            show: false,
                            max: 100,
                            nameLocation: 'middle',
                            nameGap: 30,
                        },
                        // graphic: {
                        //     type: 'circle',
                        //     shape: { r: 100 },
                        //     left: 'center',
                        //     top: 'center',
                        //     keyframeAnimation: [
                        //         {
                        //             duration: 3000,
                        //             loop: true,
                        //             keyframes: [
                        //                 {
                        //                     percent: 0.5,
                        //                     easing: 'sinusoidalInOut',
                        //                     scaleX: 0.1,
                        //                     scaleY: 0.1
                        //                 },
                        //                 {
                        //                     percent: 1,
                        //                     easing: 'sinusoidalInOut',
                        //                     scaleX: 1,
                        //                     scaleY: 1
                        //                 }
                        //             ]
                        //         }
                        //     ]
                        // },
                        series: [
                            {
                                type: 'effectScatter',
                                showEffectOn: 'emphasis', // render渲染完成自动拥有 emphasis鼠标滑过
                                rippleEffect: {
                                    scale: 3,
                                    // brushType: "stroke", // 空心
                                },
                                symbol: 'circle',
                                symbolSize: 120,
                                label: {
                                    normal: {
                                        show: true,
                                        formatter: '{b}',
                                    },
                                },
                                itemStyle: { // 全局common通用气泡
                                    normal: {
                                        color: new echarts.graphic.RadialGradient(0.3, 0.5, 0.7, [
                                            {
                                                offset: 0,
                                                color: 'rgba(51, 209, 201, 0.64)',
                                            },
                                            {
                                                offset: 1,
                                                color: 'rgba(51, 209, 201, 0.29)',
                                            },
                                        ]),
                                        opacity: 0.8,
                                        borderWidth: 1.5,
                                        borderColor: {
                                            type: 'linear',
                                            x: 0,
                                            y: 0,
                                            x2: 0,
                                            y2: 1,
                                            colorStops: [{
                                                offset: 0, color: '#33D1C9' // 0% 处的颜色
                                            }, {
                                                offset: 1, color: 'rgba(0,163,156,0.29)' // 100% 处的颜色
                                            }],
                                        },
                                    },
                                },
                                data: datas,
                            },
                        ],
                    };

                    return option
                },
                getDatas() {
                    const datas = [];
                    for (let i = 0; i < this.bubbles.length; i++) {
                        const item = this.bubbles[i];

                        datas.push({
                            // name: item.label + '\n' + item.value + item.unit,
                            name: item.label,
                            value: item.offsetData,
                            symbolSize: item.size,
                            label: {
                                normal: {
                                    ...item.labelStyle,
                                    formatter: function (params) {
                                        console.log(params);
                                        return `{labelFontStyle| ${params.data.name}} \n {valueFontStyle|${item.value}} {unitFontStyle|${item.unit}}`
                                    },
                                    rich: {
                                        labelFontStyle: item.labelStyle,
                                        valueFontStyle: item.valueFontStyle,
                                        unitFontStyle: item.unitFontStyle,
                                    }
                                }
                            },
                            itemStyle: {
                                normal: {
                                    color: item.color,
                                },
                            },
                        });
                    }
                    return datas
                }
            },
            components: {

            },
        })
    </script>
</body>

</html>